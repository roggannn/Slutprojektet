<!DOCTYPE html>
<html lang="sv" class="theme-dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teknikum E-sport</title>
    <link rel="stylesheet" href="node_modules/bulma/css/bulma.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="image/favicon-96x96.png">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="fixed-grid has-2-cols">
        <div class="grid">
            <div class="cell is-col-span-2 is-row-span-4">
                <div class="twentyPX">
                    <nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
                        <div class="navbar-brand">
                            <a href="index.html" class="navbar-item">
                                <strong>Teknikum E-sport</strong>
                            </a>
                            <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarBase">
                                <span aria-hidden="true"></span>
                                <span aria-hidden="true"></span>
                                <span aria-hidden="true"></span>
                                <span aria-hidden="true"></span>
                                
                            </a>
                        </div>

                        <div id="navbarBase" class="navbar-menu">
                            <div class="navbar-start">
                                <a href="index.html" class="navbar-item">
                                    Startsida
                                </a>

                                <a href="taktiker.html" class="navbar-item">
                                    Taktiker
                                </a>

                                <a href="matcher.html" class="navbar-item">
                                    Matcher
                                </a>

                                <a href="minasidor.html" class="navbar-item">
                                    Mina sidor
                                </a>

                                <a href="forum.html" class="navbar-item">
                                    Forum
                                </a>
                            </div>
                            <div class="navbar-end">
                                <div class="navbar-item">
                                    <div class="buttons">
                                        <a class="button is-warning" id="theme-button">
                                            <strong>ñ§ì</strong>
                                        </a>
                                        <a class="button is-primary" id="signup-button">
                                            <strong>Registrera</strong>
                                        </a>
                                        <a class="button is-primary" id="login-button">
                                            <strong>Logga in</strong>
                                        </a>
                                        <a class="button is-danger is-hidden" id="logout-button">Logga ut</a>
                                    </div>
                                </div>
                            </div>
                            <div id="login-modal" class="modal">
                                <div class="modal-background"></div>
                                <div class="modal-card">
                                    <header class="modal-card-head">
                                        <p class="modal-card-title">Konto</p>
                                        <button class="delete" aria-label="close" id="close-login-modal"></button>
                                    </header>

                                    <section class="modal-card-body">
                                        <div id="login-form">
                                            <div class="field">
                                                <label class="label">Anv√§ndarnamn</label>
                                                <div class="control">
                                                    <input type="text" id="username" class="input" placeholder="Skriv in ditt anv√§ndarnamn">
                                                </div>
                                            </div>
                                            <div class="field">
                                                <label class="label">L√∂senord</label>
                                                <div class="control">
                                                    <input type="password" id="password" class="input" placeholder="Skriv in ditt l√∂senord">
                                                </div>
                                            </div>
                                            <div class="has-text-danger mb-2" id="login-error" style="display:none;">Ogiltigt login!</div>
                                            <button class="button is-success" id="login-knappen">Logga in</button>
                                        </div>
                                    </section>
                                </div>
                            </div>
                            <div id="signup-modal" class="modal">
                                <div class="modal-background"></div>
                                <div class="modal-card">
                                    <header class="modal-card-head">
                                        <p class="modal-card-title">Konto</p>
                                        <button class="delete" aria-label="close" id="close-signup-modal"></button>
                                    </header>

                                    <section class="modal-card-body">
                                        <div id="signup-form">
                                            <div class="field">
                                                <label class="label">Anv√§ndarnamn</label>
                                                <div class="control">
                                                    <input type="text" class="input" placeholder="V√§lj ditt anv√§ndarnamn">
                                                </div>
                                            </div>
                                            <div class="field">
                                                <label class="label">Email</label>
                                                <div class="control">
                                                    <input type="email" class="input" placeholder="Skriv in din email">
                                                </div>
                                            </div>
                                            <div class="field">
                                                <label class="label">L√∂senord</label>
                                                <div class="control">
                                                    <input type="password" class="input" placeholder="Skapa ett l√∂senord">
                                                </div>
                                            </div>
                                            <button class="button is-success">Registrera</button>
                                        </div>
                                    </section>
                                </div>
                            </div>

                            <div id="welcome-message" class="mt-5 is-size-4" style="text-align:center; justify-self:center;"></div>
                            
                            <script>
                                const themeToggleButton = document.getElementById('theme-button');
                                
                                function applyTheme(theme){
                                    const html = document.documentElement;
                                    html.classList.remove('theme-light', 'theme-dark');
                                    html.classList.add(theme);
                                    localStorage.setItem('theme', theme);
                                }

                                function toggleTheme() {
                                    const currentTheme = document.documentElement.classList.contains('theme-dark') ? 'theme-dark' : 'theme-light';
                                    const newTheme = currentTheme === 'theme-dark' ? 'theme-light' : 'theme-dark';
                                    applyTheme(newTheme);
                                }

                                document.addEventListener('DOMContentLoaded', () => {
                                    const savedTheme = localStorage.getItem('theme') || 'theme-light';
                                    applyTheme(savedTheme);

                                    const button = document.getElementById('theme-toggle');
                                    if (button) {
                                        button.textContent = savedTheme === 'theme-dark' ? 'Light Mode' : 'Dark Mode';
                                    }
                                });

                                if (themeToggleButton) {
                                    themeToggleButton.addEventListener('click', toggleTheme);
                                }
                            </script>

                            <script>
                                const users = [
                                    { username: "admin", password: "User1234" },
                                    { username: "rogue", password: "rogue1234" },
                                    { username: "massiive", password: "massiive1234" }
                                ];

                                const openBtnLogin = document.getElementById('login-button');
                                const closeBtnLogin = document.getElementById('close-login-modal');
                                const loginmodal = document.getElementById('login-modal');
                                const loginForm = document.getElementById('login-form');
                                const loginBtn = document.getElementById('login-knappen');
                                const logoutBtn = document.getElementById('logout-button');
                                const errorMsg = document.getElementById("login-error");
                                const welcome = document.getElementById('welcome-message');
                                const signupbtn = document.getElementById('signup-button');

                                function showWelcome(username) {
                                    welcome.textContent = "Inloggad som: " + username;
                                    logoutBtn.classList.remove('is-hidden');
                                    signupbtn.classList.add('is-hidden');
                                    openBtnLogin.classList.add('is-hidden');
                                }

                                function logout() {
                                    localStorage.removeItem('loggedInUser');
                                    welcome.textContent = '';
                                    logoutBtn.classList.add('is-hidden');
                                    signupbtn.classList.remove('is-hidden');
                                    openBtnLogin.classList.remove('is-hidden');
                                }

                                openBtnLogin.onclick = () => loginmodal.classList.add('is-active');
                                closeBtnLogin.onclick = () => loginmodal.classList.remove('is-active');
                                
                                loginBtn.onclick = () => {
                                    const username = document.getElementById("username").value.trim();
                                    const password = document.getElementById("password").value;
                                    const validUser = users.find(u => u.username === username && u.password === password);

                                    if (validUser) {
                                        localStorage.setItem('loggedInUser', username);
                                        errorMsg.style.display = 'none';
                                        loginmodal.classList.remove('is-active');
                                        showWelcome(username);
                                    } else {
                                        errorMsg.style.display = 'block';
                                    }
                                };

                                logoutBtn.onclick = logout;

                                const savedUser = localStorage.getItem('loggedInUser');
                                if (savedUser) {
                                    showWelcome(savedUser);
                                }
                            </script>
                            <script>
                                const openBtnSignup = document.getElementById('signup-button');
                                const closeBtnSignup = document.getElementById('close-signup-modal');
                                const signupmodal = document.getElementById('signup-modal');
                                const signupForm = document.getElementById('signup-form');

                                openBtnSignup.onclick = () => signupmodal.classList.add('is-active');
                                closeBtnSignup.onclick = () => signupmodal.classList.remove('is-active');
                            </script>
                        </div>
                    </nav>
                    <script>
                        document.addEventListener('DOMContentLoaded', () => {
                            const burger = document.querySelector('.navbar-burger');
                            const menu = document.getElementById(burger.dataset.target);

                            burger.addEventListener('click', () => {
                                burger.classList.toggle('is-active');
                                menu.classList.toggle('is-active');
                            })
                        })
                    </script>
                </div>
            </div>
            <div class="cell box is-col-span-2 is-row-span-13 has-background-themed" style="min-width:200px; min-height:400px; border-radius:15px; border-top-right-radius: 0px; border-top-left-radius: 0px;">
                <h1 class="title is-1" style="margin:10px; text-align: center;">V√§lkommen till Teknikums Esport</h1>
                <h1 class="subtitle is-3" id="liga" style="margin-top:50px"></h1>
                <a id="TeknikumCS1-link" class="has-text-primary" style="cursor:pointer;font-size:larger;font-weight:bold; margin:20px;">1. Teknikum CS1</a><br>
                <div id="TeknikumCS1-box" class="box mt-2" style="max-height: 0; overflow: hidden; transition: max-height 0.2s ease-out; display:none;">
                    <p>Spelare:</p>
                    <p>rogue</p>
                    <p>Ankan</p>
                    <p>Baggebom</p>
                    <p>LDT</p>
                    <p>Lajan</p>
                </div>
                <a id="TeknikumCS2-link" class="has-text-primary" style="cursor:pointer;font-size:larger;font-weight:bold; margin:20px;">2. Teknikum CS2</a><br>
                <div id="TeknikumCS2-box" class="box mt-2" style="max-height: 0; overflow: hidden; transition: max-height 0.2s ease-out; display:none;">
                    <p>Spelare:</p>
                    <p>?</p>
                    <p>?</p>
                    <p>?</p>
                    <p>?</p>
                    <p>?</p>
                </div>
                <a id="TeknikumCS3-link" class="has-text-primary" style="cursor:pointer;font-size:larger;font-weight:bold; margin:20px;">3. Teknikum CS3</a><br>
                <div id="TeknikumCS3-box" class="box mt-2" style="max-height: 0; overflow: hidden; transition: max-height 0.2s ease-out; display:none;">
                    <p>Spelare:</p>
                    <p>?</p>
                    <p>?</p>
                    <p>?</p>
                    <p>?</p>
                    <p>?</p>
                </div>
                <script>
                    const today = new Date();
                    const options = { year: 'numeric', month: 'long', day: 'numeric' };
                    const formattedDate = today.toLocaleDateString(undefined, options);

                    document.getElementById('liga').textContent = formattedDate + " ser den interna tabellen inom CS ut s√• h√§r: ";
                </script>
                <script>
                    const togglecs1 = document.getElementById('TeknikumCS1-link');
                    const boxcs1 = document.getElementById('TeknikumCS1-box');

                    togglecs1.addEventListener('click', () => {
                        const isVisible = boxcs1.style.display === 'block';
                        boxcs1.style.display = isVisible ? 'none' : 'block';
                        boxcs1.style.maxHeight = isVisible ? '0px' : boxcs1.scrollHeight + 'px';
                        
                    });
                </script>
                <script>
                    const togglecs2 = document.getElementById('TeknikumCS2-link');
                    const boxcs2 = document.getElementById('TeknikumCS2-box');

                    togglecs2.addEventListener('click', () => {
                        const isVisible = boxcs2.style.display === 'block';
                        boxcs2.style.display = isVisible ? 'none' : 'block';
                        boxcs2.style.maxHeight = isVisible ? '0px' : boxcs2.scrollHeight + 'px';
                        
                    });
                </script>
                <script>
                    const togglecs3 = document.getElementById('TeknikumCS3-link');
                    const boxcs3 = document.getElementById('TeknikumCS3-box');

                    togglecs3.addEventListener('click', () => {
                        const isVisible = boxcs3.style.display === 'block';
                        boxcs3.style.display = isVisible ? 'none' : 'block';
                        boxcs3.style.maxHeight = isVisible ? '0px' : boxcs3.scrollHeight + 'px';
                        
                    });
                </script>
            </div>
            <div id="teamChartBox" class="cell box is-col-span-2 is-row-span-13 has-background-themed" style="min-width:200px; min-height:500px; border-radius:15px; padding:10px; margin:10px; margin-top:150px; max-height:800px">
                <h1 class="title" style="text-align: center;">Lag prestationer 2025</h1>
                <canvas id="teamChart" class="teamChart" width="500" height="150"></canvas>

                <script>
                    const defaultData = {
                        labels: ["Vecka 1", "Vecka 2", "Vecka 3", "Vecka 4", "Vecka 5", "Vecka 6"],
                        datasets: [
                            {
                                label: "Teknikum CS1",
                                data: [10, 30, 50, 70, 90, 120],
                                borderColor: "red",
                                fill: false
                            },
                            {
                                label: "Teknikum CS2",
                                data: [5, 15, 25, 35, 45, 60],
                                borderColor: "blue",
                                fill: false
                            },
                            {
                                label: "Teknikum CS3",
                                data: [3, 9, 18, 27, 32, 42],
                                borderColor: "green",
                                fill: false
                            }
                        ]
                    };

                    if (!localStorage.getItem("teamChartData")) {
                        localStorage.setItem("teamChartData", JSON.stringify(defaultData));
                    }

                    const chartData = JSON.parse(localStorage.getItem("teamChartData"));

                    const ctx = document.getElementById("teamChart").getContext("2d");
                    const chart = new Chart(ctx, {
                        type: "line",
                        data: {
                            labels: chartData.labels,
                            datasets: chartData.datasets
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                x: {
                                    ticks: {
                                        maxRotation: 45,
                                        minRotation: 30
                                    }
                                },
                                y: {
                                    stacked: false
                                }
                            }
                        }
                    });
                </script>
            </div>
            <div class="cell"></div>
            <div class="cell"></div>
            <div class="cell"></div>
            <div class="cell"></div>
            <div class="cell"></div>
            <div class="cell"></div>
            <div class="cell">Cell 10</div>
            <div class="cell">Cell 11</div>
            <div class="cell">Cell 12</div>
            <div class="cell">Cell 13</div>
            <div class="cell">Cell 14</div>
            <div class="cell">Cell 15</div>
            <div class="cell">Cell 16</div>
            <div class="cell">Cell 17</div>
            <div class="cell">Cell 18</div>
            <div class="cell">Cell 19</div>
            <div class="cell">Cell 20</div>
            <div class="cell">Cell 21</div>
        </div>
    </div>
</body>
</html>